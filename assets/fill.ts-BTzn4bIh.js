import{Q as T,t as I,i as M}from"./question-6plIKwEh.js";import"./_sentry-release-injection-file-CeOScbmL.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="320ce49b-c01e-467c-acf0-8eb67bf7ec0a",e._sentryDebugIdIdentifier="sentry-dbid-320ce49b-c01e-467c-acf0-8eb67bf7ec0a")}catch{}})();const O=e=>T.safeParse(e).success;Array.from(document.getElementsByTagName("span")).filter(e=>e.textContent);function w(e,t=document){return e.length===0?[]:y(`span.${e.join(".")}`,t)}function y(e,t=document){return Array.from(t.querySelectorAll(e))}function x(e){for(const[t,n]of Object.entries(e))if(n.length)return[t,n];return null}function Q(e){var n,o,r;const t=(r=(o=(n=e.parentElement)==null?void 0:n.parentElement)==null?void 0:o.parentElement)==null?void 0:r.parentElement;if(!t)throw new Error("wrapper not found");return t}function S(e,t=[],n=[]){const o=[],r=new Map;for(let a=0;a<e.length;a++){const f=e[a];if(!f.textContent){console.warn("Title not found");continue}const c=Q(f);if(!c)throw new Error("Question container not found");const m={radio:w(t,c),checkbox:w(n,c),input:y("input",c),textarea:y("textarea",c)},i=x(m);if(!i){console.warn("Question type not found");continue}const[s,u]=i,E={title:f.textContent,id:`Q-${a}`};if(O(s)){const l=u,g=[],h=new Map;r.set(E.id,h);for(let p=0;p<l.length;p++){const d=l[p];if(!(d!=null&&d.textContent))continue;const C=`O-${p}`;h.set(C,d),g.push({text:d.textContent,id:C})}const q={...E,type:s,options:g};o.push(q)}else{const l={...E,type:s};r.set(l.id,u[0]),o.push(l)}}return{questions:o,questionsElementsMap:r}}const v=(e,t,n)=>{const o=n.get(t);if(!o)throw new Error("Question not found");if(o instanceof Map){const r=o.get(e);if(!r)throw new Error("Option not found");return r}return o};function B(){const e=document.createElement("div");e.className="screen-effect",document.body.appendChild(e),e.addEventListener("animationend",()=>{e.remove()})}async function b(e={successScreenEffect:!0}){const n=w(["M7eMe"]),o=["aDTYNe","snByac","OvPDhc","OIC90c"],r=["aDTYNe","snByac","n5vBHf","OIC90c"],{questions:a,questionsElementsMap:f}=S(n,o,r);try{console.log("questions:",a);const{textAnswers:c,optionAnswers:m}=await I.form.answer.mutate({questions:a,url:window.location.href});for(const i of c){const s=f.get(i.questionId);if(!s)throw Error("Question element not found");if(!(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)){console.error("Question element is not an input element",s);continue}s.value=i.answer;const u=new Event("input",{bubbles:!0});s.dispatchEvent(u)}for(const i of m)for(const s of i.correctOptionIds){const u=v(s,i.questionId,f);u.click(),u.click()}return e.successScreenEffect&&B(),{status:"SUCCESS"}}catch(c){return M(c)?{status:"ERROR",cause:c}:{status:"UNEXPECTED_ERROR",cause:c}}}const D=e=>t=>{e.postMessage(t)};chrome.runtime.onConnect.addListener(async e=>{console.log("connected");const t=D(e),n=await b();t(n)});window.addEventListener("keydown",async e=>{e.ctrlKey&&e.shiftKey&&e.key.toLowerCase()==="a"&&(e.preventDefault(),await b({successScreenEffect:!1}))});console.log("content script loaded");
//# sourceMappingURL=fill.ts-BTzn4bIh.js.map
